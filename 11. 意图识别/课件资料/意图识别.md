# 意图识别

意图识别和条件选择节点比较相似，只不过：

- **条件选择节点 = 规则判断器**：基于**已知变量**做确定性布尔判断，适合“能被硬规则表达”的逻辑。
- **意图识别 = 语义分类器**：让**大模型**读用户自然语言/非结构化文本，做**概率性**意图归类与路由。



**课堂练习**

重构工作流：智能任务分发助手



**测试用例**

1. 测试用例1：小说创作请求

   - 输入：user_request = "帮我写一个关于时间旅行的短篇小说"

   - 预期：task_type = "写小说", selected_expert = "小说创作专家"

2. 测试用例2：唐诗学习请求

   - 输入：user_request = "我想学习李白的《静夜思》，请帮我分析一下"

   - 预期：task_type = "背唐诗", selected_expert = "唐诗学习专家"

3. 测试用例3：成语接龙请求

   - 输入：user_request = "我们来玩成语接龙吧，我先说：一马当先"

   - 预期：task_type = "成语接龙", selected_expert = "成语接龙专家"

4. 测试用例4：模糊请求

   - 输入：user_request = "帮我做个语文练习"

   - 预期：task_type = 其他, selected_expert = "通用助手"



意图识别节点还分为极速模式和完整模式：

**极速模式（速度优先）**

- **定位**：更低延迟，适合在线高并发/首轮路由。
- **模型**：采用平台预设的“极速模型”，**不支持更换模型**。
- **提示词**：**不支持**自定义高级提示词做分类指令。
- **配置**：只需列出意图名称/描述即可。
- **输出**：节点固定输出 `classificationId`

**完整模式（效果优先）**

- **定位**：复杂/细粒度判断，允许更强的语义理解与可控性。
- **模型**：可配合更强模型（节点级模型可配置），以效果优先。
- **提示词**：支持自定义分类提示/范例，能把分类标准写清楚，适合多意图与边界复杂的场景。



**变量聚合节点**

另外，目前我们需要在【结束】节点定义 4 个变量，用于接收前面 4 个模型所输出的结果，并且最终的结果一定是只有一个变量有值，另外三个变量是空的。这个时候我们就可以使用【变量聚合】节点，如下：

<img src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2025-09-28-084454.png" alt="image-20250928164453570" style="zoom:50%;" />

---

-EOF-