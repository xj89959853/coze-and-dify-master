# 代码节点

代码节点是 Coze 工作流中最灵活的执行单元，可以通过自定义代码实现各种复杂逻辑与业务计算。

它主要具备以下特性：

- **灵活逻辑编写**：支持直接编写自定义逻辑，用于处理数据、计算或条件判断。
- **多语言支持**：目前可使用 JavaScript 与 Python 两种语言编写代码。
- **AI 辅助开发**：内置智能助手，能够自动生成、优化或修正代码。
- **参数化设计**：输入输出参数均可灵活配置，方便与其他节点衔接。
- **异常与重试机制**：具备完善的错误捕获与重试机制，提升执行可靠性。

在使用代码节点时，需要注意以下限制条件：

- **执行时间**：单次运行最长不超过 60 秒。
- **节点数量**：每个工作流中最多可使用 50 个代码节点。
- **网络访问**：仅支持 HTTP/HTTPS 协议访问外部资源。
- **依赖库**：仅可调用平台允许的指定第三方库。



**JavaScript支持**

1. 版本和兼容性：

   - 引擎版本：V8引擎11.3.244.8版本（对应Node.js 20.3.1）

   - 语法支持：兼容ECMAScript 2022语法

   - 开发环境：支持TypeScript，提供静态类型检查

2. 内置第三方库：

   ```js
   // 仅支持以下两个第三方库
   import dayjs from 'dayjs';    // 版本1.8.36 - 日期时间处理
   import _ from 'lodash';       // 版本4.17.20 - 工具函数库
   ```

3. 支持的Web API：

- 基础API：`atob()`、`btoa()`、`console`、`setTimeout()`、`clearTimeout()`

- 数据处理：`structuredClone()`、`URL`、`URLSearchParams`

- 异步控制：`AbortController`、`AbortSignal`

- 编码解码：`TextEncoder`、`TextDecoder`

- 流处理：`WebStreams`

- 加密算法：`WebCrypto`（支持AES、HMAC、SHA）

4. 基础代码结构：

   ```js
   async function main({ params }: Args): Promise<Output> {
       // 通过params获取输入参数
       const inputValue = params.input_name;
       
       // 处理逻辑
       const result = processData(inputValue);
       
       // 返回结果对象
       return {
           output_key: result
       };
   }
   ```




**课堂练习**

1. 快速上手

2. 对电影信息进行归一化处理

   电影Agent

   1. 【最近有哪些热映的电影】- 插件1（工具1） - 数据（{A，B，C，D，E}）
   2. 【你知道阿凡达这部电影吗】- 插件1（工具2）- 数据（{Q、W、E、R}）

---

-EOF-

